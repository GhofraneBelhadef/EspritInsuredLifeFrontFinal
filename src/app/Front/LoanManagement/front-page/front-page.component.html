<nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
        <a class="navbar-brand" href="#">E<span style="color: #12908a;">L</span>I</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Insurance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">ISAs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Pension savings</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Retirement</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Later life mortgages</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<section>
    <div class="hero-block">
        <div fetchpriority="high" loading="eager" class="hero-block__image-container">
            <img decode="async" layout="fill" style="object-position: 50% 50%;" class="image-block__image"
                alt="Woman and child"
                src="https://cms.legalandgeneral.com/cdn-cgi/image/width=2000/globalassets/personal/investments/_images/hero-banner/investments-hero-1400ox.jpg"
                fetchpriority="high" loading="eager">
        </div>

        <div class="container" style=" margin: 40px auto;position: absolute;z-index: 99;top: 9px;left: 120px;">
            <div class="card"
                style="padding: 60px; border: none; border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); background: rgba(255, 255, 255, 0.8);">
                <h1 class="hero-title" style="font-size: 2.5rem; font-weight: 700; margin-bottom: 20px;">Invest in your
                    <span style="color: #12908a;">future</span>
                </h1>
                <p style="color: #666; font-size: 1.1rem; line-height: 1.6; margin-bottom: 30px; max-width: 600px;">
                    A simple investment ISA solution to help you potentially grow your savings
                </p>
                <div class="button-group mt-4">
                    <a href="#" class="btn btn-outline-primary btn-action">
                        Learn more
                    </a>
                    <button class="btn btn-danger btn-action" (click)="removeCustomer()" *ngIf="currentCustomer">
                        <i class="bi bi-person-x me-2"></i>
                        Revoke your clientship
                    </button>
                    <button class="btn btn-primary btn-action" (click)="openClientModal()" *ngIf="!currentCustomer">
                        <i class="bi bi-person-plus me-2"></i>
                        Become a client
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Customer Section -->
<section *ngIf="currentCustomer" class="container">
    <h2 class="text-center mb-5">Current Loans</h2>
    <div class="row pb-4">
        <div class="col-10"></div>
        <div class="col-2">
            <button class="btn btn-sm btn-outline-success" (click)="openLoanModal()">Apply for a loan</button>
        </div>
    </div>
    <!-- No loans message -->
    <div *ngIf="!currentLoans || currentLoans.length === 0" class=" text-center">
        <i class="fas fa-info-circle me-2"></i>
        <p>You don't have any current loans.</p>
        <img style="width: 200px;" src="https://cdn-icons-gif.flaticon.com/17771/17771131.gif">
    </div>

    <!-- Loans grid -->
    <div *ngIf="currentLoans && currentLoans.length > 0" class="row g-4">
        <div *ngFor="let loan of currentLoans" class="col-md-6 col-lg-4">
            <div class="card loan-card h-100 border-0 shadow-sm hover-shadow transition-all"
                style=" border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); background: white;">

                <!-- Card Header with Status Ribbon -->
                <div class="card-header position-relative bg-transparent border-0 pb-0 pt-3 px-3">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <span class="text-muted small">Loan ID</span>
                            <h5 class="mb-1 fw-semibold">#{{loan.idLoan}}</h5>
                        </div>
                        <span class="badge rounded-pill py-2 px-3" [ngClass]="{
                        'bg-success-light text-success': loan.status === 'APPROVED',
                        'bg-warning-light text-warning': loan.status === 'PENDING',
                        'bg-danger-light text-danger': loan.status === 'REJECTED'
                    }">
                            <i class="bi me-1" [ngClass]="{
                            'bi-check-circle-fill': loan.status === 'APPROVED',
                            'bi-hourglass-split': loan.status === 'PENDING',
                            'bi-x-circle-fill': loan.status === 'REJECTED'
                        }"></i>
                            {{loan.status}}
                        </span>
                    </div>

                    <!-- Progress indicator for PENDING status -->
                    <div *ngIf="loan.status === 'PENDING'" class="progress mt-3" style="height: 4px;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-warning"
                            role="progressbar" style="width: 65%"></div>
                    </div>
                </div>

                <!-- Card Body -->
                <div class="card-body px-3 py-3">
                    <div class="loan-details">
                        <!-- Amount with icon -->
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                                <i class="bi bi-cash-stack text-primary"></i>
                            </div>
                            <div>
                                <span class="text-muted small">Loan Amount</span>
                                <h4 class="mb-0 fw-bold">{{loan.loanAmount | currency}}</h4>
                            </div>
                        </div>

                        <!-- Details in modern layout -->
                        <div class="row g-2">
                            <div class="col-6">
                                <div class="p-2 bg-light bg-opacity-10 rounded">
                                    <span class="text-muted small d-block">Rate</span>
                                    <span class="fw-semibold">{{loan.interestRate}}%</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="p-2 bg-light bg-opacity-10 rounded">
                                    <span class="text-muted small d-block">Term</span>
                                    <span class="fw-semibold">{{loan.loanTerm}} mo</span>
                                </div>
                            </div>
                        </div>

                        <!-- Additional details (if any) -->
                        <div *ngIf="loan.createdAt" class="mt-3">
                            <hr class="my-2">
                            <div class="d-flex align-items-center text-muted small">
                                <i class="bi bi-calendar3 me-2"></i>
                                Applied on {{loan.createdAt | date:'mediumDate'}}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card Footer with Actions -->
                <div class="card-footer bg-transparent border-0 px-3 pb-3 pt-0">
                    <div class="d-flex justify-content-between">
                        <button class="btn btn-sm btn-outline-danger rounded-pill px-3"
                            (click)="removeLoan(loan.idLoan)">
                            <i class="bi bi-trash me-1"></i> Remove
                        </button>
                        <button class="btn btn-sm btn-outline-info rounded-pill px-3"
                            (click)="viewLoanDetails(loan.idLoan)">
                            <i class="bi bi-eye me-1"></i> Details
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section *ngIf="!currentCustomer" class="container">
    <h2 class="text-center mb-5">Why invest your money with us?</h2>
    <div class="row">
        <div class="col-md-4">
            <div class="feature-card text-center">
                <div class="feature-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <svg style="width:200px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 320">
                    <g id="lg-brand-icon-1-0" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1">
                        <path data-colour="lg-icon-fill-primary" fill="#FFD500"
                            d="M52 216c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12m144-42c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12m-72-78c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12m144-40c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12"
                            style="fill: #ffb600;"></path>
                        <path data-colour="lg-icon-outlines-fill" fill="#000"
                            d="M284 296a4 4 0 1 1 0 8H36a4 4 0 1 1 0-8zM268 48c11.046 0 20 8.954 20 20s-8.954 20-20 20c-2.457 0-4.81-.443-6.984-1.253l-50.994 84.991A19.94 19.94 0 0 1 216 186c0 11.046-8.954 20-20 20s-20-8.954-20-20c0-4.152 1.265-8.008 3.43-11.204l-44.643-49.951A19.9 19.9 0 0 1 124 128a20 20 0 0 1-6.572-1.105l-51.851 86.42A19.95 19.95 0 0 1 72 228c0 11.046-8.954 20-20 20s-20-8.954-20-20 8.954-20 20-20c2.364 0 4.632.41 6.738 1.163l51.814-86.359A19.95 19.95 0 0 1 104 108c0-11.046 8.954-20 20-20s20 8.954 20 20c0 4.178-1.281 8.057-3.472 11.265l44.626 49.928A19.9 19.9 0 0 1 196 166c2.58 0 5.046.488 7.31 1.378l50.922-84.871A19.94 19.94 0 0 1 248 68c0-11.046 8.954-20 20-20M52 216c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m144-42c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m-72-78c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m144-40c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12">
                        </path>
                    </g>
                </svg>
                <h3 class="feature-title padding-text">Simple</h3>
                <div class="divider"></div>
                <p>Simple investment choice and low platform charge</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-card text-center">
                <div class="feature-icon">
                    <i class="fas fa-handshake"></i>
                </div>
                <svg style="width:200px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 320">
                    <g id="lg-brand-icon-2-0" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1">
                        <path data-colour="lg-icon-fill-primary" fill="#FFD500"
                            d="M237.02 124.02c22.091 0 40 17.909 40 40s-17.909 40-40 40-40-17.909-40-40 17.909-40 40-40M123.99 28c22.091 0 40 17.909 40 40s-17.909 40-40 40-40-17.909-40-40 17.909-40 40-40"
                            style="fill: #ffb600;"></path>
                        <path data-colour="lg-icon-half-tone-fill" fill="#000"
                            d="M60 272a4 4 0 1 1 0 8 4 4 0 0 1 0-8m-16-16a4 4 0 1 1 0 8 4 4 0 0 1 0-8m16-16a4 4 0 1 1 0 8 4 4 0 0 1 0-8m-16-16a4 4 0 1 1 0 8 4 4 0 0 1 0-8m16-16a4 4 0 1 1 0 8 4 4 0 0 1 0-8">
                        </path>
                        <path data-colour="lg-icon-outlines-fill" fill="#000"
                            d="M68 192c5.225 0 9.67 3.34 11.317 8H92c6.627 0 12 5.373 12 12v.215c9.88-.295 49.481.36 72.797 27.783l32.043.002c8.206 0 14.923 6.723 15.349 15.15l54.071-21.84c.9-.34 8.12-2.89 13.31.71 2 1.41 4.46 4.27 4.46 9.93-.028 12.056-11.608 19.032-15.01 20.752l-.24.119q-.225.11-.38.18c-5.22 3.35-74.05 47-99.4 47-23.065 0-62.763-18.323-77.28-25.43-1.174 5.393-5.976 9.43-11.72 9.43H36c-6.627 0-12-5.374-12-12v-80c0-6.628 5.373-12 12-12h32Zm35.998 28.252v57.516C113.974 282.757 157.887 304 181 304c6.64 0 21.76-3.94 56.12-22.71 16.085-8.786 30.522-17.678 36.395-21.345l.44-.275c1.479-.925 2.307-1.451 2.345-1.47a5 5 0 0 1 .5-.28c.01 0 .105-.04.271-.122l.189-.093c2.113-1.07 10.77-6.073 10.77-13.785 0-1-.13-2.74-1-3.35-1.2-.84-4.14-.45-5.83.16l-59.36 24-.163.061c-2.75 4.34-7.476 7.21-12.837 7.21h-53.05a4 4 0 1 1 0-8h53.05c4.07 0 7.37-3.59 7.37-8s-3.3-8-7.37-8H174.9l-.182-.006-.05-.002a4 4 0 0 1-.207-.017l-.028-.004a4 4 0 0 1-2.558-1.354l-.095-.118c-20.844-26.028-59.386-26.475-67.782-26.248M92 208H80v80h12a4 4 0 0 0 4-4v-72a4 4 0 0 0-4-4m-24-8H36a4 4 0 0 0-4 4v80a4 4 0 0 0 4 4h36v-84a4 4 0 0 0-4-4m169-96c25.251-.067 47.82 15.744 56.38 39.5 8.947 24.61.9 52.179-19.879 68.113-20.78 15.934-49.492 16.552-70.938 1.527s-30.67-42.222-22.791-67.194C187.65 120.974 210.815 103.996 237 104m0 6-.893.007C206.696 110.484 183 134.475 183 164c0 29.823 24.177 54 54 54a54.05 54.05 0 0 0 50.74-72.45c-7.8-21.307-28.05-35.496-50.74-35.55m0 14a40 40 0 0 1 37.59 26.33c5.966 16.406.604 34.786-13.248 45.41s-32.994 11.038-47.292 1.022-20.45-28.146-15.2-44.794C204.103 135.32 219.544 124 237 124m0 6-.7.008a34.1 34.1 0 0 0-10.93 2.052c-16.56 6.043-25.756 23.742-21.18 40.766 4.577 17.025 21.406 27.728 38.765 24.653s29.488-18.907 27.938-36.468c-1.55-17.56-16.264-31.024-33.893-31.01Zm4.23 12.09c3.49 1.67 6.12 4.88 7.83 9.56a3 3 0 0 1-5.64 2.05c-1.15-3.15-2.75-5.23-4.77-6.19a7.8 7.8 0 0 0-6 0 8 8 0 0 0-4.78 10.18v.08a57 57 0 0 0 2.65 5.432l10.2-3.712a3 3 0 0 1 2.05 5.64l-8.982 3.276.174.264c2.716 4.147 5.257 8.162 5.528 12.57l17.45-6.35 2.05 5.64-9.071 3.288a3 3 0 0 1-.309.152l-18.79 6.84a2.9 2.9 0 0 1-1.06.19 3 3 0 0 1-1-5.82l4.524-1.645c.83-3.393-1.194-6.745-4.644-12.015a62 62 0 0 1-.677-.987L223.94 172a3 3 0 0 1-1.02.15 3 3 0 0 1-1-5.82l2.883-1.05a62 62 0 0 1-2.583-5.43v-.14c-2.576-7.236 1.159-15.196 8.37-17.84a13.54 13.54 0 0 1 10.64.22M124 8c7 .007 13.945 1.239 20.52 3.64 29.25 10.676 45.488 41.94 37.4 72.008-8.089 30.069-37.819 48.968-68.478 43.529s-52.075-33.41-49.327-64.426S92.862 7.964 124 8m0 6-.681.001c-22.46.18-42.464 14.344-50.069 35.53-8.06 22.145-.829 46.96 17.868 61.309 18.697 14.347 44.539 14.913 63.845 1.397s27.617-37.992 20.532-60.47C168.411 29.29 147.567 14.003 124 14m0 14a40 40 0 0 1 13.68 2.42c19.485 7.105 30.308 27.924 24.93 47.954-5.38 20.03-25.177 32.627-45.6 29.015S82.313 85.152 84.132 64.492 103.26 27.989 124 28m0 6-.447.001A33.85 33.85 0 0 0 92 56.371 34 34 0 1 0 124 34m9.3 12.89a13.47 13.47 0 0 1 8 7c1.61 3.51 1.56 7.67-.14 12.34a3 3 0 1 1-5.64-2c1.15-3.14 1.26-5.77.33-7.8a7.8 7.8 0 0 0-4.6-3.86A7.92 7.92 0 0 0 121 57.26v.08a56 56 0 0 0-1.463 5.854l10.143 3.696a3 3 0 0 1-1 5.82 2.8 2.8 0 0 1-1-.19l-8.981-3.268-.04.34c-.59 4.932-1.219 9.61-3.819 13.158l17.45 6.35a3 3 0 0 1-1 5.82h-.06a3 3 0 0 1-1-.18l-9.355-3.408-.035-.012L102 84.48a3 3 0 0 1 2-5.64l4.65 1.692c2.788-2.071 3.381-5.935 4.12-12.162q.054-.616.121-1.23l-4.011-1.46a3 3 0 0 1 2-5.64l2.966 1.08a62 62 0 0 1 1.514-5.81l.05-.14a13.93 13.93 0 0 1 17.89-8.28">
                        </path>
                    </g>
                </svg>
                <h3 class="feature-title padding-text">Trustworthy</h3>
                <div class="divider"></div>
                <p>We've helped millions of customers with their savings, retirement and life insurance</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="feature-card text-center">
                <div class="feature-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <svg style="width:150px" xmlns="http://www.w3.org/2000/svg" width="320" height="200"
                    viewBox="0 0 320 320">
                    <g id="lg-brand-icon-3-0" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1">
                        <path data-colour="lg-icon-fill-primary" fill="#FFD500" d="M32 52v53l128-41 128 41-1-53-127-40z"
                            style="fill: #ffb600"></path>
                        <path data-colour="lg-icon-half-tone-fill" fill="#000"
                            d="M48 80a4 4 0 1 1 0 8 4 4 0 0 1 0-8m224 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8M64 64a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8m128 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8M80 48a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8M128 32a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8m32 0a4 4 0 1 1 0 8 4 4 0 0 1 0-8">
                        </path>
                        <path data-colour="lg-icon-outlines-fill" fill="#000"
                            d="M160.36 8a4 4 0 0 1 1.83.46l127 39.64a4 4 0 0 1 2.81 3.81l.001.497.001.686v.613c.01 5.512.034 23.267.041 47.49v2.997l.001 1.523v14.355A37155 37155 0 0 1 292 172.2c0 29.9-15.62 61.42-43.79 88.76-24.32 23.56-56.6 42.45-86.6 50.67a4 4 0 0 1-1.68.37h-.23a4 4 0 0 1-1.7-.38c-30-8.31-62.21-27.3-86.44-50.92-28.14-27.44-43.61-59.01-43.56-88.9.03-18.345.041-36.117.044-52.119v-17.38l-.001-1.49v-2.933c-.009-23.678-.034-40.654-.041-45.156v-.488L28 52.037v-.497a4 4 0 0 1 2.82-3.83L158.28 8.45a4 4 0 0 1 1.85-.45Zm-.26 60.28-123.3 39.1a4 4 0 0 1-.8.16v64.27c0 27.72 14.57 57.25 41.15 83.13 23.22 22.64 54.02 40.85 82.62 48.85 28.64-7.92 59.52-26.03 82.82-48.6 26.66-25.8 41.41-55.28 41.41-83v-3.464c.003-12.097.017-23.907.02-35.086v-6.316c-.002-6.763-.01-13.258-.03-19.404a4 4 0 0 1-.69-.15zm4.01 35.72c39.765.03 71.976 32.29 71.945 72.055-.03 39.367-31.648 71.33-70.864 71.936L164 248h-.11c-39.765-.03-71.976-32.29-71.946-72.055.03-39.367 31.649-71.33 70.865-71.936L164 104zm-.01 8h-.1c-35.346-.028-64.022 28.604-64.05 63.95-.027 34.993 28.034 63.448 62.892 64.04l1.058.01h.1c35.346.028 64.023-28.604 64.05-63.95S199.446 112.028 164.1 112m41.73 33.17a4 4 0 0 1 .151 5.5l-.15.16L147 209.66l-26.83-26.83a4.002 4.002 0 0 1 5.5-5.811l.16.151L147 198.34l53.17-53.17a4 4 0 0 1 5.66 0m-45.6-128.95L36 54.48v44.76l122.16-38.73a4.1 4.1 0 0 1 2-.45 4 4 0 0 1 2 .46L284 99.59V54.86z">
                        </path>
                    </g>
                </svg>
                <h3 class="feature-title padding-text">Secure</h3>
                <div class="divider"></div>
                <p>Our secure and easy to use platform gives access to our actively managed funds provided by our
                    experts</p>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="footer-links">
            <a href="#" class="footer-link">Cookie policy</a>
            <a href="#" class="footer-link">Accessibility</a>
            <a href="#" class="footer-link">Legal and regulatory information</a>
            <a href="#" class="footer-link">Privacy notice</a>
            <a href="#" class="footer-link">Security information</a>
            <a href="#" class="footer-link">Sitemap</a>
            <a href="#" class="footer-link">All our sites</a>
            <a href="#" class="footer-link">About us</a>
            <a href="#" class="footer-link">Making a complaint</a>
            <a href="#" class="footer-link">Beware of scams</a>
            <a href="#" class="footer-link">Group website</a>
            <a href="#" class="footer-link">Modern slavery statement</a>
            <a href="#" class="footer-link">Careers</a>
        </div>
        <div class="copyright">
            © Legal & General Group plc 2025
        </div>
    </div>
</footer>


<div class="modal fade" [class.show]="showModal" [style.display]="showModal ? 'block' : 'none'" id="clientModal"
    tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="clientModalLabel">Become a Client</h5>
                <button type="button" class="btn-close" (click)="closeClientModal()" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <form #customerForm="ngForm" class="needs-validation" novalidate>
                    <div class="mb-3">
                        <label for="gender" class="form-label">Gender</label>
                        <select class="form-select" id="gender" name="gender" [(ngModel)]="customer.gender" required>
                            <option value="">Select Gender</option>
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="maritalStatus" class="form-label">Marital Status</label>
                        <select class="form-select" id="maritalStatus" name="maritalStatus"
                            [(ngModel)]="customer.maritalStatus" required>
                            <option value="">Select Marital Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="dependent" class="form-label">Number of Dependents</label>
                        <input type="number" class="form-control" id="dependent" name="dependent"
                            [(ngModel)]="customer.dependent" required min="0">
                    </div>

                    <div class="mb-3">
                        <label for="income" class="form-label">Income</label>
                        <input type="number" class="form-control" id="income" name="income"
                            [(ngModel)]="customer.income" required min="0">
                    </div>

                    <div class="mb-3">
                        <label for="creditHistory" class="form-label">Credit History</label>
                        <input type="number" class="form-control" id="creditHistory" name="creditHistory"
                            [(ngModel)]="customer.creditHistory" required min="0">
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="closeClientModal()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="onSubmit()">Submit</button>
            </div>
        </div>
    </div>
</div>
<div class="modal-backdrop fade" [class.show]="showModal" [style.display]="showModal ? 'block' : 'none'"></div>



<div class="modal fade" [class.show]="showModalAddLoan" [style.display]="showModalAddLoan ? 'block' : 'none'"
    id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="clientModalLabel">Become a Client</h5>
                <button type="button" class="btn-close" (click)="closeClientModal()" aria-label="Close"></button>
            </div>
            <div class="modal-body">


                <form [formGroup]="loanForm" class="row g-3">
                    <div class="col-12">
                        <label for="loanAmount" class="form-label">Loan Amount</label>
                        <input type="number" class="form-control" id="loanAmount" formControlName="loanAmount">
                    </div>
                    <div class="col-12">
                        <label for="loanTerm" class="form-label">Loan Term</label>
                        <input type="number" class="form-control" id="loanTerm" formControlName="loanTerm">
                    </div>
                    <div class="col-12">
                        <label for="coapplicantIncome" class="form-label">Coapplicant Income</label>
                        <input type="number" class="form-control" id="coapplicantIncome"
                            formControlName="coapplicantIncome">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="closeClientModal()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="onSubmitLoan()">Submit</button>
            </div>
        </div>
    </div>
</div>
<div class="modal-backdrop fade" [class.show]="showModalAddLoan" [style.display]="showModalAddLoan ? 'block' : 'none'">
</div>
<div class="modal-backdrop fade" [class.show]="showModalDetails" [style.display]="showModalDetails ? 'block' : 'none'">
</div>
<div class="modal fade" [class.show]="showModalDetails" [style.display]="showModalDetails ? 'block' : 'none'"
    id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true" aria-modal="true">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content border-0 shadow-lg">
            <!-- Modal Header -->
            <div class="modal-header text-white p-4" style="background-color: #afd6ff;">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0 bg-white bg-opacity-10 p-2 rounded-circle">
                        <i class="bi bi-file-earmark-text-fill fs-4"></i>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h2 class="modal-title fs-4 fw-bold mb-0" id="clientModalLabel">
                            Loan Details #{{detailsLoan?.idLoan}}
                        </h2>
                    </div>
                </div>
                <button type="button" class="btn-close btn-close-white" (click)="closeClientModal()"
                    aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body p-0">
                <!-- Tabs Navigation -->
                <ul class="nav nav-tabs border-0 px-4 pt-3" id="loanDetailTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" [class.active]="tabShow == 'details'" id="details-tab"
                            data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab"
                            aria-controls="details" (click)="tabShow = 'details'" aria-selected="true">
                            <i class="bi bi-file-text me-2"></i>Loan Details
                        </button>
                    </li>
                    <li class="nav-item" role="presentation" *ngIf="detailsLoan?.predictionResult">
                        <button class="nav-link" [class.active]="tabShow == 'predict'" id="ai-tab" data-bs-toggle="tab"
                            data-bs-target="#ai" type="button" role="tab" aria-controls="ai"
                            (click)="tabShow = 'predict';" aria-selected="false">
                            <i class="bi bi-robot me-2"></i>AI Analysis
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" [class.active]="tabShow == 'tips'" id="tips-tab" data-bs-toggle="tab"
                            data-bs-target="#tips" type="button" role="tab" aria-controls="tips" (click)="showTips()"
                            aria-selected="false">
                            <i class="bi bi-lightbulb me-2"></i>Improvement Tips
                        </button>
                    </li>
                </ul>

                <!-- Tabs Content -->
                <div class="tab-content p-4">
                    <!-- Loan Details Tab -->
                    <div class="tab-pane fade" [class.show]="tabShow == 'details'" [class.active]="tabShow == 'details'"
                        id="details" role="tabpanel" aria-labelledby="details-tab">
                        <div class="row g-0">
                            <!-- Left Column - Loan Information -->
                            <div class="col-lg-6 pe-4">
                                <!-- Loan Summary Card -->
                                <div class="card border-0 shadow-sm mb-4" style="background-color: white;">
                                    <div class="card-header bg-light bg-opacity-50 border-0 py-3" >
                                        <h3 class="h6 mb-0 fw-semibold d-flex align-items-center">
                                            <i class="bi bi-currency-dollar me-2" style="color: #12908a;"></i>
                                            Loan Summary
                                        </h3>
                                    </div>
                                    <div class="card-body pt-0">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Amount</p>
                                                    <h4 class="fw-bold " style="color: #12908a;">
                                                        ${{detailsLoan?.loanAmount |
                                                        number:'1.2-2'}}</h4>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Interest Rate</p>
                                                    <h4 class="fw-bold">{{detailsLoan?.interestRate}}%</h4>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Term</p>
                                                    <h4 class="fw-bold">{{detailsLoan?.loanTerm}} months</h4>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Status</p>
                                                    <span class="badge rounded-pill py-2 px-3 fw-normal" [ngClass]="{
                                                        'bg-success': detailsLoan?.status === 'APPROVED',
                                                        'bg-warning text-dark': detailsLoan?.status === 'PENDING',
                                                        'bg-danger': detailsLoan?.status === 'REJECTED'
                                                    }">
                                                        <i class="bi bi-check-circle-fill me-1"
                                                            *ngIf="detailsLoan?.status === 'APPROVED'"></i>
                                                        <i class="bi bi-hourglass-split me-1"
                                                            *ngIf="detailsLoan?.status === 'PENDING'"></i>
                                                        <i class="bi bi-x-circle-fill me-1"
                                                            *ngIf="detailsLoan?.status === 'REJECTED'"></i>
                                                        {{detailsLoan?.status}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column - Customer Information -->
                            <div class="col-lg-6 ps-4">
                                <div class="card border-0 shadow-sm h-100" style="background-color: white;">
                                    <div class="card-header bg-light bg-opacity-50 border-0 py-3">
                                        <h3 class="h6 mb-0 fw-semibold d-flex align-items-center">
                                            <i class="bi bi-person-badge  me-2" style="color: #12908a;"></i>
                                            Customer Profile
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex align-items-center mb-4">
                                            <div class="flex-shrink-0">
                                                <div class="avatar avatar-lg bg-primary bg-opacity-10  rounded-circle d-flex align-items-center justify-content-center"
                                                    style="color: #12908a;">
                                                    <i class="bi bi-person-fill fs-4"></i>
                                                </div>
                                            </div>
                                            <div class="flex-grow-1 ms-3">
                                                <h5 class="mb-0">{{'Customer #'+detailsLoan?.customer?.idCustomer}}</h5>
                                                <p class="text-muted small mb-0">Customer ID:
                                                    {{detailsLoan?.customer?.idCustomer}}</p>
                                            </div>
                                        </div>

                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Gender</p>
                                                    <p class="fw-bold mb-0">
                                                        <i class="bi" [ngClass]="{
                                                            'bi-gender-male text-info': detailsLoan?.customer?.gender === 'Male',
                                                            'bi-gender-female text-pink': detailsLoan?.customer?.gender === 'Female'
                                                        }"></i>
                                                        {{detailsLoan?.customer?.gender}}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Marital Status</p>
                                                    <p class="fw-bold mb-0">
                                                        <i class="bi" [ngClass]="{
                                                            'bi-heart-fill text-danger': detailsLoan?.customer?.maritalStatus === 'Married',
                                                            'bi-person-fill text-secondary': detailsLoan?.customer?.maritalStatus === 'Single'
                                                        }"></i>
                                                        {{detailsLoan?.customer?.maritalStatus}}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Dependents</p>
                                                    <p class="fw-bold mb-0">
                                                        <i class="bi bi-people-fill text-warning me-1"></i>
                                                        {{detailsLoan?.customer?.dependent || 0}}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Credit History</p>
                                                    <p class="fw-bold mb-0">
                                                        <span
                                                            [class.text-success]="detailsLoan?.customer?.creditHistory === 1"
                                                            [class.text-danger]="detailsLoan?.customer?.creditHistory === 0">
                                                            <i class="bi bi-credit-card-fill me-1"></i>
                                                            {{detailsLoan?.customer?.creditHistory === 1 ? 'Good' :
                                                            'None'}}
                                                        </span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <hr class="my-4">

                                        <h6 class="text-muted text-uppercase small mb-3">Income Details</h6>
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Applicant Income</p>
                                                    <h5 class="fw-bold text-success mb-0">
                                                        ${{detailsLoan?.customer?.income | number:'1.2-2'}}
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="p-3 bg-light bg-opacity-10 rounded">
                                                    <p class="small text-muted mb-1">Co-applicant Income</p>
                                                    <h5 class="fw-bold text-success mb-0">
                                                        ${{detailsLoan?.coapplicantIncome | number:'1.2-2'}}
                                                    </h5>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Analysis Tab -->
                    <div class="tab-pane fade" [class.show]="tabShow == 'predict'" [class.active]="tabShow == 'predict'"
                        id="ai" role="tabpanel" aria-labelledby="ai-tab" *ngIf="detailsLoan?.predictionResult">
                        <div class="row g-4">
                            <div class="col-12">
                                <div class="card border-0 shadow-sm h-100" style="background-color: white;">
                                    <div
                                        class="card-header bg-light bg-opacity-75 border-0 py-3 d-flex align-items-center">
                                        <i class="bi bi-robot fs-4 me-2 text-primary"></i>
                                        <h3 class="h5 mb-0 fw-bold">AI Decision Analysis</h3>
                                    </div>

                                    <div class="card-body">
                                        <!-- Modern Decision Alert with Progress Circle -->
                                        <div class="alert d-flex align-items-center p-3 mb-4 rounded-3" [ngClass]="{
    'alert-success border border-2 border-success': detailsLoan?.predictionResult.prediction_result === 'approved',
    'alert-danger border border-2 border-danger': detailsLoan?.predictionResult.prediction_result === 'rejected'
  }">
                                            <div class="position-relative me-3">
                                                <div class="progress-circle"
                                                    [style.--progress]="detailsLoan?.predictionResult.confidenceScore * 100">
                                                    <div class="progress-circle-outer rounded-circle" [ngClass]="{
             'border-success': detailsLoan?.predictionResult.prediction_result === 'approved',
             'border-danger': detailsLoan?.predictionResult.prediction_result === 'rejected'
           }">
                                                        <div class="progress-circle-inner rounded-circle d-flex align-items-center justify-content-center"
                                                            [ngClass]="{
               'text-success': detailsLoan?.predictionResult.prediction_result === 'approved',
               'text-danger': detailsLoan?.predictionResult.prediction_result === 'rejected'
             }">
                                                            {{detailsLoan?.predictionResult.confidenceScore |
                                                            percent:'1.0-0'}}
                                                        </div>
                                                    </div>
                                                    <div class="progress-circle-fill rounded-circle"
                                                        [style.width.%]="detailsLoan?.predictionResult.confidenceScore * 100"
                                                        [ngClass]="{
             'bg-success': detailsLoan?.predictionResult.prediction_result === 'approved',
             'bg-danger': detailsLoan?.predictionResult.prediction_result === 'rejected'
           }">
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <h4 class="alert-heading fw-bold mb-1 d-flex align-items-center">
                                                    <i
                                                        class="bi bi-{{detailsLoan?.predictionResult.prediction_result === 'approved' ? 'check-circle' : 'x-circle'}}-fill me-2"></i>
                                                    {{detailsLoan?.predictionResult.prediction_result === 'approved' ?
                                                    'Approvable' : 'Rejectable'}}
                                                </h4>
                                                <p class="mb-0 small text-muted">
                                                    Confidence score: {{detailsLoan?.predictionResult.confidenceScore |
                                                    percent:'1.1-1'}}
                                                </p>
                                                <div class="mt-2">
                                                    <span
                                                        class="badge rounded-pill bg-{{detailsLoan?.predictionResult.prediction_result === 'approved' ? 'success' : 'danger'}}">
                                                        {{detailsLoan?.predictionResult.prediction_result === 'approved'
                                                        ? 'Low Risk' : 'High Risk'}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Key Factors Section -->
                                        <div class="mt-4">
                                            <h5 class="fw-semibold mb-3 d-flex align-items-center">
                                                <i class="bi bi-bar-chart-line-fill text-muted me-2"></i>
                                                Key Decision Factors
                                            </h5>

                                            <!-- Income Progress -->
                                            <div class="mb-4">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span class="small text-muted fw-semibold">Income</span>
                                                    <span class="small fw-bold">{{detailsLoan?.customer?.income |
                                                        currency}}</span>
                                                </div>
                                                <div class="progress" style="height: 8px;">
                                                    <div class="progress-bar bg-success" role="progressbar"
                                                        [style.width]="(detailsLoan?.customer?.income || 0) / 10000 * 100 + '%'"
                                                        aria-valuenow="detailsLoan?.customer?.income" aria-valuemin="0"
                                                        aria-valuemax="10000">
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Credit History Progress -->
                                            <div class="mb-4">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span class="small text-muted fw-semibold">Credit History</span>
                                                    <span class="small fw-bold">
                                                        {{detailsLoan?.customer?.creditHistory === 1 ? 'Good' :
                                                        'Average'}}
                                                    </span>
                                                </div>
                                                <div class="progress" style="height: 8px;">
                                                    <div class="progress-bar" [ngClass]="{
               'bg-success': detailsLoan?.customer?.creditHistory === 1,
               'bg-danger': detailsLoan?.customer?.creditHistory === 0
             }" [style.width]="detailsLoan?.customer?.creditHistory === 1 ? '100%' : '30%'">
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Loan Amount Progress -->
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span class="small text-muted fw-semibold">Loan Amount</span>
                                                    <span class="small fw-bold">{{detailsLoan?.loanAmount |
                                                        currency}}</span>
                                                </div>
                                                <div class="progress" style="height: 8px;">
                                                    <div class="progress-bar bg-info" role="progressbar"
                                                        [style.width]="(detailsLoan?.loanAmount || 0) / 10000 * 100 + '%'">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    *
                                    <!-- Card Footer -->
                                    <div class="card-footer bg-transparent border-0 py-3 text-center">
                                        <small class="text-muted">
                                            <i class="bi bi-info-circle me-1"></i>
                                            Analysis generated by our AI underwriting system
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Improvement Tips Tab -->
                    <div class="tab-pane fade" [class.show]="tabShow == 'tips'" [class.active]="tabShow == 'tips'"
                        id="tips" role="tabpanel" aria-labelledby="tips-tab">
                        <div class="card border-0 shadow-sm" style="background-color: white;">
                            <div class="card-header bg-light bg-opacity-50 border-0 py-3">
                                <h3 class="h6 mb-0 fw-semibold d-flex align-items-center">
                                    <i class="bi bi-lightbulb me-2" style="color: #12908a;"></i>
                                    Personalized Loan Improvement Tips
                                </h3>
                            </div>
                            <div class="card-body">
                                <div *ngIf="detailsLoan">
                                    <!-- Dynamic Tips Section -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="chat-container">
                                                <!-- Bot introduction bubble with illustration -->
                                                <div class="chat-bubble bot-bubble with-illustration">
                                                    <div class="bubble-content">
                                                        <div class="d-flex align-items-start">
                                                            <div class="flex-grow-1">
                                                                <div class="bubble-text">
                                                                    <strong>Loan Improvement Assistant</strong>
                                                                    <p>Hi there! I'm here to help you improve your loan
                                                                        options. Let's chat about how we can get you
                                                                        better terms!</p>
                                                                </div>
                                                            </div>
                                                            <div class="illustration ms-3">
                                                                <img width="120"
                                                                    src="https://assets-v2.lottiefiles.com/a/b49871a8-116f-11ee-852f-7f7978800fdd/KxMxI0Yi8A.gif" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Message history -->
                                                <div *ngFor="let msg of messages" class="chat-bubble"
                                                    [ngClass]="{'bot-bubble': msg.sender === 'bot', 'user-bubble': msg.sender === 'user'}">
                                                    <div class="bubble-content">
                                                        <div class="bubble-text">
                                                            {{msg.text}}
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Empty state -->
                                                <div *ngIf="!detailsLoan" class="chat-bubble bot-bubble">
                                                    <div class="bubble-content">
                                                        <div class="bubble-text">
                                                            <i class="bi bi-info-circle me-2"></i>
                                                            Select a loan to view personalized improvement tips
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Input area -->
                                                <div class="chat-input">
                                                    <div class="input-group">
                                                        <input type="text" [(ngModel)]="userInput"
                                                            (keyup.enter)="handleUserResponse()"
                                                            class="form-control rounded-pill"
                                                            placeholder="Type your message...">
                                                        <button (click)="handleUserResponse()"
                                                            class="btn btn-primary rounded-pill ms-2">
                                                            <i class="bi bi-send"></i>
                                                        </button>
                                                        <button (click)="toggleVoice()"
                                                            class="btn btn-outline-primary rounded-pill ms-2">
                                                            <i
                                                                class="bi bi-{{isSpeaking ? 'volume-mute' : 'volume-up'}}"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Modal Footer -->
                            <div class="modal-footer bg-light p-4 border-top">
                                <button type="button" class="btn btn-outline-danger rounded-pill px-4"
                                    (click)="closeClientModal()">
                                    <i class="bi bi-x-circle-fill me-2"></i>Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>